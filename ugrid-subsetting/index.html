<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>subsetting - UGRID</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "subsetting";
    var mkdocs_page_input_path = "ugrid-subsetting.md";
    var mkdocs_page_url = "/ugrid-subsetting/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
  <script src="../js/mathjaxhelper.js"></script>

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-9133259-16', 'UGRID.github.io');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> UGRID</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">subsetting</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#ugrid-subsetting">UGRID Subsetting</a></li>
                
                    <li><a class="toctree-l4" href="#introduction">Introduction</a></li>
                
                    <li><a class="toctree-l4" href="#opendap-subsetting-protocol">OPeNDAP subsetting protocol</a></li>
                
                    <li><a class="toctree-l4" href="#hyrax-implementation">Hyrax implementation</a></li>
                
                    <li><a class="toctree-l4" href="#gridfields">GridFields</a></li>
                
                    <li><a class="toctree-l4" href="#other-opendap-servers">Other OPeNDAP servers.</a></li>
                
            
            </ul>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">UGRID</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>subsetting</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/ugrid-conventions/ugrid-conventions" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="ugrid-subsetting">UGRID Subsetting<a class="headerlink" href="#ugrid-subsetting" title="Permanent link"></a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link"></a></h2>
<p>This project, and accompanying document, are all about a NetCDF standard for describing unstructured grids and the data/model results stored on them. Having such a standard is key to interoperability between different modeling systems and post-processing tools, etc. And once NetCDF is supported that access protocols like Open-source Project for a Network Data Access Protocol (OPeNDAP) can be used.</p>
<p>However, there is an additional challenge. Modern unstructured grid models can use very large grids, and thus produce extremely large results sets. However, a particular client application may only need a spatial subset of that data. Ideally, there would be a way for a client to download only the portion of the model domain required.</p>
<p>With structured grids, you can make good use of OPeNDAP&rsquo;s ability to slice arrays to get a subset of the data that is useful. However, with UGRIDs, data in a contiguous region in the spatial domain is generally not contiguous in the data arrays. So to do subsetting, the system needs to understand the topology of the grid, and select the appropriate discontiguous subset of the data and grid, and put all that together into a still-correct UGRID dataset.</p>
<p>This can be done on the client side, figuring out the grid geometry and requesting the required data via OPeNDAP. However, OPeNDAP does not support requesting discontiguous data, so it is necessary to make many small requests to the server and put it back together on the client. This not only means a lot of complex client-side code, but it&rsquo;s also painfully slow to do many small requests, rather than one large one. In fact, with some testing, for anything but tiny subsets, it&rsquo;s faster to grab the entire grid than do many small requests for a subset.</p>
<h2 id="opendap-subsetting-protocol">OPeNDAP subsetting protocol<a class="headerlink" href="#opendap-subsetting-protocol" title="Permanent link"></a></h2>
<p>To address this issue, OPeNDAP, Inc., under a grant from NOAA, has developed an extension to the Hyrax server that supports server-side subsetting of UGRIDs via OPeNDAP server-side functions. As the implementation uses the existing OPeNDAP server-side function protocol, it should be usable with standard OPeNDAP clients, and it should be possible to implement the functionally with the same application programming interface (API), in any OPeNDAP server.</p>
<p>Documentation of the server-side function API is here:</p>
<p><a href="http://docs.opendap.org/index.php/OPULS:_UGrid_Subsetting">UGRID subsetting docs</a></p>
<h2 id="hyrax-implementation">Hyrax implementation<a class="headerlink" href="#hyrax-implementation" title="Permanent link"></a></h2>
<p>Recent development builds of Hyrax include the new functionality, so it should be available in the next Hyrax release.</p>
<p>The source code for the Hyrax implementation is here:</p>
<p><a href="https://scm.opendap.org/svn/trunk/ugrid_functions/">Hyrax subsetting code</a></p>
<h2 id="gridfields">GridFields<a class="headerlink" href="#gridfields" title="Permanent link"></a></h2>
<p>The subsetting code in the Hyrax server is implemented by the <a href="http://www.stccmop.org/gridfields">GridFields</a> library. The source code for the version of GridFields can be found here:</p>
<p><a href="https://scm.opendap.org/svn/trunk/hyrax-dependencies/downloads/gridfields-1.0.1.tar.gz">GridFields source</a></p>
<p>The GridFields library has a much broader scope of capabilities than is utilized with this simple subsetting function, and could be used for a number of other UGRID-manipulating and evaluating tasks.</p>
<h2 id="other-opendap-servers">Other OPeNDAP servers.<a class="headerlink" href="#other-opendap-servers" title="Permanent link"></a></h2>
<p>As of this writing, I am unaware of any other implementations of server-side subsetting in an OPeNDAP server. However it is hoped that other OPeNDAP servers will add such functionality eventually, and hopefully using the same API, as documented by the document linked to above.</p>
<p>Gridfields is written in C++, and thus could be used with any other server that can call C++. It also has Python bindings, and thus could be used with a Python implementation, such as <a href="http://www.pydap.org/">PyDAP</a>.</p>
<p>Alternatively, the same functionality could be implemented with a different library for the subsetting code itself. Perhaps a Java library for use with the <a href="http://www.unidata.ucar.edu/software/thredds/current/tds/TDS.html">THREDDS</a> server.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/ugrid-conventions/ugrid-conventions" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>

</body>
</html>
